import matplotlib.pyplot as plt
import math
import numpy as np
m=20
N=100

def alphaopt(d):
    somme = 0
    for k in range(1,N+1):
        somme += k**d/(math.factorial(k))
    return somme*math.exp(-1)
print(alphaopt(0.2))
def phi(j,d): return j**d

def regularapp(d): return 1-(1-(phi(m,d)-phi(m-1,d)))*math.exp(-1)

t = np.arange(0,1,0.05)
opt = [alphaopt(x) for x in t]
app = [regularapp(x) for x in t]

"""
plt.plot(t,opt,'kx-',label='alpha_phi')
plt.plot(t,app,'ro-',label='App')
plt.grid(True)
plt.legend()
plt.xlabel('p')
plt.show()
"""

import csv
with open('dPower.csv', 'a') as outcsv:   
    #configure writer to write standard csv file
    writer = csv.writer(outcsv, delimiter=',', quotechar='|', quoting=csv.QUOTE_MINIMAL, lineterminator='\n')
    writer.writerow(['d','alpha', 'app'])
    for i in range(len(t)):
        writer.writerow([t[i], opt[i], app[i]])
